<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>

    <!-- Invoice View -->
    <record id="view_account_einvoice_form" model="ir.ui.view">
        <field name="name">account.einvoice.form</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="l10n_ec_einvoice.view_account_einvoice_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='move_id']" position="after">
                <field name="picking_id" attrs="{'readonly':[('picking_autorizado','=',True)]}"/>
                <field name="picking_autorizado"/>
            </xpath>
            <xpath expr="//button[@name='action_generate_einvoice']" position="after">
                <button name="action_erefguide_wizard" string="Generar GuÃ­a" type="object"
                        class="oe_highlight"
                        attrs="{'invisible':['|',('state','=','draft'),'|',('autorizado_sri','=',False),('picking_autorizado','=',True)]}"/>
            </xpath>
        </field>
    </record>

    <!-- Journal view -->
    <record id="view_account_erefguide_journal_form" model="ir.ui.view">
      <field name="name">account.journal.form</field>
      <field name="model">account.journal</field>
      <field name="inherit_id" ref="l10n_ec_authorisation.view_account_journal_form"/>
      <field name="arch" type="xml">
        <field name="auth_out_refund_id" position="after">
          <field name="auth_erefguide_id" domain="[('in_type','=','interno')]" context="{'default_in_type': 'interno'}"
                 attrs="{'invisible': [('type','!=','sale')], 'required': [('type','=','sale')]}"/>
          <field name="do_invoice_picking"/>
        </field>
      </field>
	</record>

  </data>
</odoo>